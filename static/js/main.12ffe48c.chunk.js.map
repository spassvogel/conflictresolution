{"version":3,"sources":["common/constants.ts","components/pixi/Marker.tsx","components/pixi/SituationScene.tsx","components/contentModal/ConflictModalContent.tsx","components/pixi/Forklift.tsx","components/contentModal/index.tsx","components/pixi/Viewport.tsx","components/pixi/Conveyor.tsx","components/pixi/BigRacks.tsx","images/ui/check.svg","components/legenda/index.tsx","components/Main.tsx","components/introModal/introModal.tsx","components/completeModal/completeModal.tsx","components/playerBridge/style/close.svg","components/playerBridge/index.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["SceneElementType","AvatarPose","SequenceItemType","Marker","props","ref","useRef","data","useState","position","PIXI","image","bounce","process","useEffect","gsap","from","current","duration","ease","pixi","visible","scale","delay","bounceAnim","to","yoyo","repeat","y","Math","random","kill","onDragStart","event","onDragEnd","undefined","onDragMove","anchor","interactive","mousedown","touchstart","mouseup","mouseupoutside","mousemove","touchmove","SituationScene","sceneConfig","avatar","otherProps","width","height","className","options","backgroundColor","map","e","sceneElement","flipped","type","pose","key","renderElement","registerPlugin","TextPlugin","Orientation","ConflictModalContent","content","translations","selectedAnswer","selectedOption","selectOption","reaction","useMemo","reactions","confirmed","setConfirmed","scene","setSceneConfig","balloonRef","balloonArrowRef","balloonTextRef","insetRef","nextButtonRef","sound","add","sequence","playSequence","useCallback","tl","timeline","balloonText","inset","killTweensOf","removeAttribute","innerHTML","text","forEach","sequenceItem","index","onStart","style","visibility","speech","balloonArrowPos","right","positionArrow","caption","length","value","oldClass","newClass","Linear","easeNone","autoAlpha","display","left","Sine","easeInOut","rect","getBoundingClientRect","top","offsetTop","window","addEventListener","removeEventListener","handleSkipSequenceStep","currentIndex","parseInt","currentLabel","substring","isNaN","seek","handleYes","correct","play","setCorrectAnswer","handleNo","renderOption","option","onClick","element","otherOptions","querySelectorAll","opacity","parentTop","querySelector","childTop","distance","abs","onComplete","setTimeout","handleOptionClick","currentTarget","description","split","p","confirmText","yesText","noText","ContentModal","onClose","handleClose","isOpen","ariaHideApp","portalClassName","overlayClassName","onRequestClose","header","Viewport","forwardRef","app","useApp","cursor","renderer","plugins","interaction","cursorStyles","pointer","PixiComponentViewport","PixiComponent","create","viewport","PixiViewport","screenWidth","screenHeight","worldWidth","worldHeight","ticker","minScale","maxScale","drag","pinch","wheel","clamp","direction","clampZoom","decelerate","boxImagePath","Conveyor","boxContainerRef","boxTexture","setBoxTexture","loader","resources","texture","load","_","rss","spawnBox","sprite","addChild","x","repeatDelay","alpha","Forklift","orientation","northEast","southEast","southWest","northWest","BigRacks","forkliftRef","forkliftOrientation","setForkliftOrientation","forkliftLane","setForkliftLane","name","_extends","Object","assign","target","i","arguments","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","createElement","_ref3","_ref4","id","points","_ref","svgRef","title","viewBox","enableBackground","xmlSpace","ForwardRef","Legenda","backgroundImage","contentItem","item","answers","setSituationSelected","renderContent","PixiPlugin","registerPIXI","Main","setSituationOpen","viewportRef","selectedSituation","setSelectedSituation","canvasWidth","setCanvasWidth","canvasHeight","setCanvasHeight","resize","min","innerWidth","outerWidth","innerHeight","outerHeight","moveCenter","blur","url","autoPlay","selectedContent","renderMarker","pointerdown","handleMarkerClick","join","transparent","answer","copy","setAnswers","getAvatarImage","IntroModal","selectedAvatar","renderAvatar","filters","OutlineFilter","zIndex","stageHeight","stageWidth","onChangeAvatar","sortableChildren","disabled","CompleteModal","restart","cx","cy","r","_ref5","d","transform","_ref6","_ref7","_ref8","x1","y1","x2","y2","_ref9","PlayerBridge","gameDataReceived","send","payload","webkit","stringifiedMessageObj","JSON","stringify","messageHandlers","cordova_iab","postMessage","parent","REACT_APP_PLAYER_MODE","setGameData","gameData","GAMEDATA","getGameData","msg","App","intro","setIntro","setAvatar","situationIsOpen","setTranslations","setData","handleGameDataReceived","t","reduce","acc","translation","console","log","fetch","then","response","json","completed","filter","Boolean","showCompleted","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.12ffe48c.chunk.js","sourcesContent":["\nexport interface ConflictContent {\n  header: string;\n  position: number[];\n  description: string;\n  sequence: SequenceItem[];\n  scene: SceneElement[];\n  situationSpeech: string;\n  options: string[];\n  reactions: ConflictReaction[];\n}\n\nexport interface SceneElement {\n  image?: string;\n  type?: SceneElementType;\n  position?: [number, number];\n  scale?: number;\n  flipped: boolean;\n  pose: AvatarPose;\n}\n\nexport enum SceneElementType {\n  sprite = \"sprite\",\n  avatar = \"avatar\",\n}\n\nexport enum AvatarPose {\n  angle = \"angle\",\n  front = \"front\",\n  side = \"side\",\n  angry = \"angry\"\n}\n\nexport interface ConflictReaction { \n  correct: boolean, \n  text: string, \n  scene: SceneElement[]; \n  confirmText: string,\n  yesText: string;\n  noText: string;\n  confirmImage?: string \n}\n\nexport enum SequenceItemType {\n  caption = 'caption',\n  speech = 'speech',\n  image = 'image',  // image, no speech\n}\n\nexport interface SequenceItem {\n  type: SequenceItemType,\n  text: string,\n  balloonArrowPos?: number;\n  \n  scene?: SceneElement[]; // optional override\n}","import React, { useRef, useEffect, useState, ComponentProps } from 'react';\nimport { Sprite } from '@inlet/react-pixi';\nimport * as PIXI from 'pixi.js';\nimport { gsap } from 'gsap'\n\n\nconst CAN_DRAG = false;\ninterface Props {\n    position?: PIXI.Point;\n    delay?: number; // Wait this long before showing\n    bounce?: boolean;\n}\n\nconst Marker = (props: Props & ComponentProps<typeof Sprite>) => {\n    const ref = useRef<PIXI.Sprite>(null);\n    const data = useRef<PIXI.interaction.InteractionData>();\n    const [position, setPosition] = useState<PIXI.Point>(props.position || new PIXI.Point());\n    const popInDuration = 1;\n    const image = props.bounce ? `${process.env.PUBLIC_URL}/images/ui/marker.svg` :  `${process.env.PUBLIC_URL}/images/ui/marker-green.svg`;\n\n    useEffect(() => {\n        // Pop in animation!\n        gsap.from(ref.current, { \n          duration: popInDuration,\n          ease: \"elastic.out(2, 0.5)\",\n          pixi: { \n            visible: false,\n            scale: .1, \n          }\n        }).delay(props.delay || 0);\n    }, [props.delay]);\n\n    useEffect(() => {\n        let bounceAnim: gsap.core.Tween;\n        // Bounce animation!\n        if (props.bounce !== false) {\n            bounceAnim = gsap.to(ref.current, { \n                duration: .5,\n                yoyo: true,\n                repeat: -1,\n                pixi: { \n                  y: '-=40', \n                }\n              }).delay(popInDuration + Math.random());      \n        }\n        return () => {\n            bounceAnim?.kill();\n        }\n    }, [props.bounce]);\n\n    const onDragStart = (event: PIXI.interaction.InteractionEvent) => {\n        if (!CAN_DRAG) return;\n        // store a reference to the data\n        // the reason for this is because of multitouch\n        // we want to track the movement of this particular touch\n        data.current = event.data;\n        event.stopPropagation(); // Stop dragging the map!\n    }\n    \n    const onDragEnd = () => {\n        data.current = undefined;\n    }\n    \n    const onDragMove = () => {\n        if (!CAN_DRAG) return;\n        if (data.current)\n        {\n            const newPosition = data.current.getLocalPosition(ref.current!.parent);\n            setPosition(newPosition);\n        }\n    }\n    \n    return (\n        <Sprite \n            { ...props }\n            anchor={[0.5, 0.5]}\n            position={position}\n            ref={ref}\n            interactive={true}\n            image={image}\n            mousedown={onDragStart}\n            touchstart={onDragStart}\n            mouseup={onDragEnd}\n            mouseupoutside={onDragEnd}\n            mousemove={onDragMove}\n            touchmove={onDragMove}\n        />\n    );\n}\n\nexport default Marker;","import React, { useRef, useEffect, useState, ComponentProps } from 'react';\nimport { Sprite, Container, Stage } from '@inlet/react-pixi';\nimport { SceneElement, SceneElementType } from '../../common/constants';\nimport * as PIXI from 'pixi.js';\n\ninterface Props {\n  sceneConfig: SceneElement[];\n  avatar: string;\n}\n\n\nif (process.env.NODE_ENV === \"development\") {\n  // @ts-ignore\n  window.__PIXI_INSPECTOR_GLOBAL_HOOK__ && window.__PIXI_INSPECTOR_GLOBAL_HOOK__.register({ PIXI: PIXI });\n}\n\nconst SituationScene = (props: Props & ComponentProps<typeof Container>) => {\n  // const ref = useRef<PIXI.Sprite>(null);\n  // const data = useRef<PIXI.interaction.InteractionData>();\n  // const [position, setPosition] = useState<PIXI.Point>(props.position || new PIXI.Point());\n  // const popInDuration = 1;\n  const {sceneConfig, avatar, ...otherProps} = props;\n  const renderElement = (sceneElement: SceneElement) => {\n    const scale: [number, number] = [sceneElement.scale || 1, sceneElement.scale || 1];\n    if (sceneElement.flipped) scale[0] = -scale[0];\n\n\n    switch (sceneElement.type) {\n      case SceneElementType.avatar:\n        return (\n          <Sprite \n            image={`${process.env.PUBLIC_URL}/images/avatars/${avatar}-${sceneElement.pose || \"front\"}.png`} \n            key=\"avatar\" \n            position={sceneElement.position || [0, 0]}\n            scale={scale}\n            anchor={[0.5, 0]}\n          />\n        )\n      default: \n        return (\n          <Sprite \n            image={`${process.env.PUBLIC_URL}/${sceneElement.image}`} \n            key={sceneElement.image} \n            position={sceneElement.position || [0, 0]}\n          />\n        )\n    }\n  }\n  return (\n      <Stage width={1280} height={720} className=\"scene\" options={{backgroundColor: 0xffffff}}>\n        <Container {...otherProps} >\n         {sceneConfig.map(e => renderElement(e))}\n        </Container>\n      </Stage>\n  )\n}\n\nexport default SituationScene;","import React, { useState, useEffect, useRef, useMemo, useCallback } from 'react';\nimport { ConflictContent, SequenceItemType, SceneElement } from '../../common/constants';\nimport { gsap, Linear, Sine } from 'gsap'\nimport { TextPlugin } from 'gsap/all';\nimport sound from 'pixi-sound';\nimport SituationScene from '../pixi/SituationScene';\nimport \"./style/conflictModal.css\";\n\ngsap.registerPlugin(TextPlugin);\nconst SPEED_MODIFIER = 1; // for debugging\n\ninterface Props {\n  content: ConflictContent;\n  translations: { [key: string]: string}\n  avatar: string;\n  setCorrectAnswer: (index: number) => void;\n  selectedAnswer?: number; // When answer has been set correctly before\n}\n\nconst ConflictModalContent = (props: Props) => {\n  const {content, translations, avatar, selectedAnswer = null} = props;\n  const [selectedOption, selectOption] = useState<number | null>(selectedAnswer);\n  // Reaction based on current selection\n  const reaction = useMemo(() => {\n    if (selectedOption === null) return null;\n    return props.content.reactions[selectedOption];\n  }, [props.content.reactions, selectedOption]);\n  \n  const [confirmed, setConfirmed] = useState(selectedAnswer != null);\n  const [sceneConfig, setSceneConfig] = useState<SceneElement[]>(reaction?.scene || props.content.scene);\n  const balloonRef = useRef<HTMLDivElement>(null);\n  const balloonArrowRef = useRef<HTMLDivElement>(null);\n  const balloonTextRef = useRef<HTMLSpanElement>(null);\n  const insetRef = useRef<HTMLDivElement>(null);\n  const ref = useRef<HTMLDivElement>(null);\n  const nextButtonRef = useRef<HTMLButtonElement>(null);\n\n  const handleOptionClick = (element: HTMLLIElement, index: number) => {\n    element.className = \"animating\";\n    if (!ref.current) return;\n\n    // Fade out the non selected options\n    const otherOptions = ref.current!.querySelectorAll(\".options .normal\");\n    gsap.to(otherOptions, {\n      duration: 0.5,\n      opacity: 0,\n      ease: Linear.easeNone,\n    });\n\n    // Move current option to top\n    var parentTop = ref.current!.querySelector(\".options\")!.getBoundingClientRect().top; // Initial parent's top distance from the top of the viewport;\n    var childTop = element.getBoundingClientRect().top;\n    var distance = Math.abs(parentTop - childTop);\n\n    gsap.to(element, {\n      duration: 0.5,\n      top: -distance,\n      ease: Linear.easeNone,\n      onComplete: () => {\n        setTimeout(() => {\n          element.className = \"\";\n          selectOption(index);\n        }, 250);\n      }\n    });\n  };\n\n  useEffect(() => {\n    sound.add('correct', `${process.env.PUBLIC_URL}/sound/correct.mp3`);    \n    sound.add('wrong', `${process.env.PUBLIC_URL}/sound/wrong.mp3`);\n  }, []);\n\n  const sequence = useRef<gsap.core.Timeline>();\n  const playSequence = useCallback(() => {\n    const tl = gsap.timeline();\n    sequence.current = tl;\n    const balloonText = balloonTextRef!.current!;\n    const inset = insetRef.current!;\n    gsap.killTweensOf(balloonText);\n    gsap.killTweensOf(balloonRef.current);\n    gsap.killTweensOf(inset);\n\n    // Reset\n    if (nextButtonRef.current) nextButtonRef.current!.removeAttribute('style');\n    balloonRef.current!.removeAttribute('style');\n    balloonArrowRef.current!.removeAttribute('style');\n    inset.removeAttribute('style');\n\n    // Build timeline\n    balloonText.innerHTML = translations[content.sequence[0].text];\n\n    // All the sequences\n    content.sequence.forEach((sequenceItem, index) => {\n\n      const onStart = () => {\n        if (balloonArrowRef.current) {\n          balloonArrowRef.current.style.visibility = sequenceItem.type === SequenceItemType.speech ? 'visible' : 'hidden';\n        }\n        if (sequenceItem.type !== SequenceItemType.image) {\n          if (balloonRef.current) {\n            balloonRef.current!.className = `balloon ${sequenceItem.type}`;\n          }\n          balloonText.innerHTML = translations[sequenceItem.text];\n          \n          if (sequenceItem.balloonArrowPos && balloonArrowRef.current) {\n            balloonArrowRef.current!.style.right = `${sequenceItem.balloonArrowPos}%`;  \n          }\n          positionArrow();\n        }\n\n        if (sequenceItem.scene) {\n          setSceneConfig(sequenceItem.scene);\n        }\n      } \n\n      tl.add(`seq-${index}`);\n      switch (sequenceItem.type) {\n        case SequenceItemType.caption:\n          tl.to(balloonText, {\n            onStart,\n            duration: translations[sequenceItem.text].length * 0.025 / SPEED_MODIFIER,\n            text: {\n              value: translations[sequenceItem.text], \n              oldClass: \"hidden\",\n              newClass: \"visible\"\n            },\n            ease: Linear.easeNone,\n          });\n          tl.to(balloonText, { duration: 3});\n          break;\n        case SequenceItemType.speech:\n          tl.to(balloonText, {\n            onStart,\n            duration: translations[sequenceItem.text].length * 0.045 / SPEED_MODIFIER,\n            ease: Linear.easeNone,\n          });\n          break;\n        case SequenceItemType.image:\n          tl.to(balloonRef.current, {\n            onStart,\n            duration: .25,\n            autoAlpha: 0,\n            ease: Linear.easeNone,\n          });\n          tl.to(balloonArrowRef.current, {\n            duration: .25,\n            autoAlpha: 0,\n            ease: Linear.easeNone,\n          }, \"-=.25\");\n          break;\n      }\n    });\n\n    tl.add(`seq-${content.sequence.length}`);\n\n    // Fade the balloon out\n    tl.to(balloonRef.current, {\n      delay: 1 / SPEED_MODIFIER,\n      duration: .5,\n      autoAlpha: 0,\n      ease: Linear.easeNone,\n    });\n\n    tl.add('end');\n    // Slide inset in\n    tl.to(inset, {\n      onStart: () => {\n        if (nextButtonRef.current) \n          nextButtonRef.current!.style.display = \"none\";\n\n        if (balloonArrowRef.current)\n          balloonArrowRef.current.style.visibility = 'hidden';\n      },\n      duration: .5,\n      left: 0,\n      ease: Sine.easeInOut,\n    }, \"-=1\");\n  }, [content.sequence, translations]);\n\n  const positionArrow = () => {\n    if (!balloonRef.current || !balloonArrowRef.current) return;\n    const rect = balloonRef.current.getBoundingClientRect();\n    balloonArrowRef.current.style.top = `${balloonRef.current.offsetTop + rect.height}px`;\n  }\n\n  useEffect(() => {\n    window.addEventListener('resize', positionArrow);\n    return () => {\n      window.removeEventListener('resize', positionArrow);\n    }\n  }, []);\n\n  const handleSkipSequenceStep = () => {\n    if (!sequence.current) return;\n    const currentIndex = parseInt(sequence.current.currentLabel().substring('seq-'.length));\n    if (isNaN(currentIndex)) return;\n    // @ts-ignore\n    sequence.current.seek(`seq-${currentIndex+1}`, false);\n  }\n\n  useEffect(() => {\n    if (selectedAnswer) {\n      insetRef.current!.style.left = '0px';\n      balloonRef.current!.style.visibility = 'hidden';\n    }\n    else {\n      playSequence();\n    }\n  }, [content.sequence, playSequence, selectedAnswer]);\n\n  const handleReplay = () => {\n    setSceneConfig(props.content.scene);\n    selectOption(null);\n    setConfirmed(false);\n    playSequence();\n  }\n\n  const handleYes = () => {\n    setConfirmed(true);\n    setSceneConfig(reaction!.scene);\n\n    if (reaction!.correct) {\n      sound.play('correct');\n      props.setCorrectAnswer(selectedOption!);\n    } else {\n      sound.play('wrong');\n    }\n  }\n\n  const handleNo = () => {\n    if (!sequence.current) return;\n    setSceneConfig(props.content.scene);\n    selectOption(null);\n    setConfirmed(false);\n    // @ts-ignore\n    sequence.current.seek('end', false);\n  }\n\n  const renderReaction = () => {\n    if (!reaction) {\n      return null;\n    }\n    if (!confirmed) {\n      return (\n        <>\n          <p>{translations[reaction.confirmText]}</p>\n          <p className=\"yesno\">\n            <button onClick={handleYes}>{translations[\"yes\"]}</button>\n            <span className=\"motivation\">{translations[reaction.yesText]}</span>\n          </p>\n          <p className=\"yesno\">\n            <button onClick={handleNo}>{translations[\"no\"]}</button>\n            <span className=\"motivation\">{translations[reaction.noText]}</span>\n          </p>\n        </>\n      )\n    }\n    return (\n      <>\n        { reaction?.correct && (<p className=\"right-option\">{translations[\"right-option\"]}</p>)}\n        { translations[reaction.text].split(\"\\n\").map(p => <p key={p.substring(0, 10)}>{p}</p>)}\n        { (!reaction?.correct) && (\n         <button onClick={handleNo} className=\"button-replay\">\n           {translations[\"try-again-button\"]}\n         </button>\n        )}     \n      </>\n    )\n  }\n\n  const renderOption = (option: string, index: number) => {\n    if (selectedOption === null) {\n      // Nothing selected, render all\n      return (\n        <li key={option} className=\"normal\" onClick={(e) => handleOptionClick(e.currentTarget, index)} >\n          <div className=\"text\">\n            {translations[option]}\n          </div>\n        </li>\n      );\n    }\n    if (selectedOption === index) {\n      // Render only selected option\n      let className = 'selected';\n      if (confirmed) {\n        className = reaction?.correct ? \"correct\" : \"wrong\";\n      }\n\n      return (\n        <li key={option} className={className} >\n          <div className=\"text\">\n           {translations[option]}\n          </div>\n        </li>\n      );\n    }\n  }\n\n  return (\n    <div className=\"modal-content modal-conflict\" ref={ref}>\n      <div className=\"situation\" onClick={handleSkipSequenceStep}>\n        { props.content.scene && <SituationScene sceneConfig={sceneConfig} avatar={avatar}/>}\n        <div className=\"inset\" ref={insetRef} >\n          <p>\n            {translations[content.description]}\n          </p>\n          <ul className=\"options\">\n            {content.options.map((option, index) => renderOption(option, index))}\n          </ul>\n          { renderReaction() }\n        </div> \n        <div className={`balloon`} ref={balloonRef}>\n          <span ref={balloonTextRef}></span>\n        </div>\n        <div className=\"balloon-arrow\" ref={balloonArrowRef} style={{visibility: 'hidden'}}/>\n      </div>\n      { !selectedOption && (\n        <div className=\"controls-bottomright\">\n          <button className=\"button-replay\" onClick={handleReplay}>\n            {translations[\"replay-button\"]}\n          </button>\n          <button className=\"button-next\" ref={nextButtonRef} onClick={handleSkipSequenceStep}>\n            {\">\"}\n          </button>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default ConflictModalContent;","import React, { ComponentProps, forwardRef } from \"react\";\nimport { PixiComponent, applyDefaultProps, Container, useApp, Sprite } from \"@inlet/react-pixi\";\nimport * as PIXI  from 'pixi.js';\n\n\nexport enum Orientation {\n  northEast,\n  southEast,\n  southWest,\n  northWest,\n}\n\ninterface Props  {\n    orientation: Orientation;\n};\n\nconst Forklift = forwardRef<PIXI.Container, any>((props: Props & ComponentProps<typeof Container>, ref) => {\n  return (\n    <Container {...props} ref={ref}>\n      { props.orientation === Orientation.northEast && <Sprite image={`${process.env.PUBLIC_URL}/images/map/forklift-up.png`}  anchor={[0.5, 0]}/>}\n      { props.orientation === Orientation.southEast && <Sprite image={`${process.env.PUBLIC_URL}/images/map/forklift-down.png`} anchor={[0.5, 0]} />}\n      { props.orientation === Orientation.southWest && <Sprite image={`${process.env.PUBLIC_URL}/images/map/forklift-down.png`} scale={[-1, 1]} anchor={[0.5, 0]}/>}\n      { props.orientation === Orientation.northWest && <Sprite image={`${process.env.PUBLIC_URL}/images/map/forklift-up.png`} scale={[-1, 1]} anchor={[0.5, 0]}/>}\n    </Container>\n  )\n});\n\nexport default Forklift;","import React from 'react';\nimport ReactModal from 'react-modal';\nimport './style/modal.css';\n\nimport ConflictModalContent from './ConflictModalContent';\nimport { ConflictContent } from '../../common/constants';\n\ninterface Props {\n  content: ConflictContent;\n  translations: { [key: string]: string}\n  avatar: string;\n  onClose: () => void;\n  setCorrectAnswer: (answer: number) => void;\n  selectedAnswer?: number;\n}\n\nconst ContentModal = (props: Props) => {\n  const { content, translations, onClose, setCorrectAnswer, selectedAnswer, avatar } = props;\n\n  const handleClose = () => {\n    onClose();\n  };\n\n  return (\n    <ReactModal\n      isOpen={true}\n      ariaHideApp={false}\n      portalClassName=\"modal-portal\"\n      overlayClassName=\"modal-overlay\"\n      className=\"modal\"\n      onRequestClose={handleClose}\n    >\n      <>\n        <div className=\"header\">\n          <h1>{translations[content.header]} </h1>\n          <div className=\"modal-close\" onClick={() => handleClose()}></div>\n        </div>\n        <ConflictModalContent \n          content={content}\n          translations={translations}\n          setCorrectAnswer={setCorrectAnswer}\n          selectedAnswer={selectedAnswer}\n          avatar={avatar}\n        />\n      </>\n    </ReactModal>  \n  )\n}\n\nexport default ContentModal;\n\n","import React, { forwardRef, ReactNode } from \"react\";\nimport { Viewport as PixiViewport, ClickEventData } from \"pixi-viewport\";\nimport { PixiComponent, useApp } from \"@inlet/react-pixi\";\n\ninterface Props {\n  children: ReactNode;\n  onClick?(event: ClickEventData): void;\n  screenWidth: number,\n  screenHeight: number,\n  worldWidth: number,\n  worldHeight: number,\n  minScale?: number;\n  maxScale?: number;\n}\n\n/** Viewport leverages pixi-viewport to create a pannable map \n * https://davidfig.github.io/pixi-viewport/jsdoc/\n */\nconst Viewport = forwardRef<PixiViewport, any>((props, ref) => {\n  const app = useApp();\n  if (app) {\n      // Perhaps this is better moved somewhere else\n      const cursor = `url('${process.env.PUBLIC_URL}/img/cursors/dwarven_gauntlet_extra_6.png'), auto`;\n      app.renderer.plugins.interaction.cursorStyles.pointer = cursor;\n  }\n  return <PixiComponentViewport app={app} {...props} ref={ref} />;  \n})\n\ninterface PixiComponentProps {\n    app: PIXI.Application;\n}\n\nconst PixiComponentViewport = PixiComponent(\"Viewport\", {\n  create: (props: PixiComponentProps & Props) => {\n    const viewport = new PixiViewport({\n      screenWidth: props.screenWidth,\n      screenHeight: props.screenHeight,\n      worldWidth: props.worldWidth,\n      worldHeight: props.worldHeight,\n      ticker: props.app.ticker,\n      interaction: props.app.renderer.plugins.interaction,\n      // the interaction module is important for wheel to work properly when renderer.view is placed or scaled\n    });\n\n    const { \n      minScale = .5, \n      maxScale = 1 \n    } = props;\n    \n    viewport\n      .drag()\n      .pinch()\n      .wheel()\n      .clamp({ direction: 'all' })\n      .clampZoom({ minScale, maxScale })\n      .decelerate();\n\n    return viewport;\n  },\n});\nexport default Viewport;\n","import React, { useRef, useEffect, useState, ComponentProps } from 'react';\nimport { Sprite, Container, useApp } from '@inlet/react-pixi';\nimport * as PIXI from 'pixi.js';\nimport { gsap, Linear } from 'gsap'\n\nconst boxImagePath = `${process.env.PUBLIC_URL}/images/map/conveyor-box.png`;\n\nconst Conveyor = (props: ComponentProps<typeof Container>) => {\n  const boxContainerRef = useRef<PIXI.Container>(null);\n  const [boxTexture, setBoxTexture] = useState<PIXI.Texture>();\n  const app = useApp();\n\n  useEffect(() => {\n    if (!app.loader.resources[boxImagePath]) {\n      app.loader.add(boxImagePath)\n      .load((_, rss) => {\n        setBoxTexture(rss[boxImagePath]!.texture);\n      })\n    } else {\n      setBoxTexture(app.loader.resources[boxImagePath]!.texture);\n    }\n  }, [app]);\n\n  useEffect(() => {\n    if (!boxTexture) return;\n\n    const spawnBox = (delay: number) => {\n      const sprite = new PIXI.Sprite(boxTexture);\n      boxContainerRef.current?.addChild(sprite);\n      sprite.x = 568;\n      sprite.y = 160;\n\n      const tl = gsap.timeline({\n        delay,\n        repeat: -1, \n        repeatDelay: 1\n      });\n      tl.to(sprite, {\n        ease: Linear.easeNone,\n        pixi: { \n          x: 956,\n          y: 256\n        }, \n        duration: 5\n      });\n      tl.to(sprite, {\n        ease: Linear.easeNone,\n        pixi: { \n          x: 959,\n          y: 278\n        }, \n        duration: .5\n      });\n      tl.to(sprite, {\n        ease: Linear.easeNone,\n        pixi: { \n          x: 541,\n          y: 473\n        }, \n        duration: 6\n      });\n      tl.to(sprite, {\n        delay: 1,\n        ease: Linear.easeNone,\n        pixi: { \n          alpha: 0\n        }, \n        duration: 1\n      });\n\n      // const duration = 3;\n      // gsap.to(sprite, { \n      //   duration,\n      //   ease: Linear.easeNone,\n      //   pixi: { \n      //     //visible: false,\n      //     x: boxMovePath[1][0], \n      //     y: boxMovePath[1][1],\n      //   }\n      // });\n    }\n\n    spawnBox(0);\n    spawnBox(3);\n    spawnBox(5.5);\n    spawnBox(7);\n    spawnBox(9.5);\n  }, [boxTexture]);\n\n  return (\n    <Container {...props}>\n      <Sprite image={`${process.env.PUBLIC_URL}/images/map/rack-small.png`} />\n      <Sprite image={`${process.env.PUBLIC_URL}/images/map/conveyor-right.png`} x={87} y={152} />\n      <Sprite image={`${process.env.PUBLIC_URL}/images/map/rack-small.png`} x={160} y={39} />\n      <Sprite image={`${process.env.PUBLIC_URL}/images/map/conveyor-right.png`} x={251} y={192} />\n      \n      <Sprite image={`${process.env.PUBLIC_URL}/images/map/conveyor-left.png`} x={520} y={234} />\n      <Container ref={boxContainerRef}>\n\n      </Container>\n      {/* <Sprite image={`${process.env.PUBLIC_URL}/images/map/conveyor-box.png`} x={568} y={160} name=\"box1\" />\n      <Sprite image={`${process.env.PUBLIC_URL}/images/map/conveyor-box.png`} x={956} y={267} name=\"box2\" /> */}\n      \n      <Sprite image={`${process.env.PUBLIC_URL}/images/map/rack-small.png`} x={320} y={78} />\n      \n      {/* 956,267 */}\n    </Container>\n  );\n}\n\nexport default Conveyor;","import React, { useRef, useEffect, useState, ComponentProps } from 'react';\nimport { Sprite, Container } from '@inlet/react-pixi';\nimport Forklift, { Orientation } from './Forklift';\nimport { gsap, Linear } from 'gsap'\n\nconst BigRacks = (props: ComponentProps<typeof Container>) => {\n  const forkliftRef = useRef<PIXI.Container>(null);\n  const [forkliftOrientation, setForkliftOrientation] = useState<Orientation>(Orientation.southWest);\n  const [forkliftLane, setForkliftLane] = useState<number>(1); // lane 1 is furthest away, lane 2 is closest by\n\n  useEffect(() => {\n    const tl = gsap.timeline({\n      repeat: -1, \n      repeatDelay: 1\n    });\n    tl.to(forkliftRef.current, {\n      onStart: () => { setForkliftOrientation(Orientation.southEast); setForkliftLane(1) },\n      ease: Linear.easeNone,\n      pixi: { \n        x: 1135,\n        y: 148\n      }, \n      duration: 5\n    });\n    tl.to(forkliftRef.current, {\n      onStart: () => { setForkliftOrientation(Orientation.southWest); setForkliftLane(0)},\n      ease: Linear.easeNone,\n      pixi: { \n        x: 782,\n        y: 330\n      }, \n      duration: 3.5\n    });\n    tl.to(forkliftRef.current, {\n      onStart: () => { setForkliftOrientation(Orientation.northWest); setForkliftLane(3)},\n      ease: Linear.easeNone,\n      pixi: { \n        x: 42,\n        y: 130\n      }, \n      duration: 5\n    });\n    tl.to(forkliftRef.current, {\n      onStart: () => { setForkliftOrientation(Orientation.northEast); setForkliftLane(0)},\n      ease: Linear.easeNone,\n      pixi: { \n        x: 306,\n        y: 58\n      }, \n      duration: 2\n    });\n    tl.to(forkliftRef.current, {\n      onStart: () => { setForkliftOrientation(Orientation.southEast); setForkliftLane(2)},\n      ease: Linear.easeNone,\n      pixi: { \n        x: 906,\n        y: 241\n      }, \n      duration: 4\n    });\n    tl.to(forkliftRef.current, {\n      onStart: () => { setForkliftOrientation(Orientation.southWest); setForkliftLane(0)},\n      ease: Linear.easeNone,\n      pixi: { \n        x: 782,\n        y: 330\n      }, \n      duration: 2\n    });\n    tl.to(forkliftRef.current, {\n      onStart: () => { setForkliftOrientation(Orientation.northWest); setForkliftLane(3)},\n      ease: Linear.easeNone,\n      pixi: { \n        x: 42,\n        y: 130\n      }, \n      duration: 5\n    });\n  }, []);\n\n  /** note, this z order stuff friggin blows */\n  return (\n    <Container {...props}>\n      <Sprite image={`${process.env.PUBLIC_URL}/images/map/rack-big.png`} x={385} y={-172} />\n      <Sprite image={`${process.env.PUBLIC_URL}/images/map/rack-big.png`} x={191} y={-84} />\n\n      <Forklift orientation={forkliftOrientation} ref={forkliftRef} x={484} y={72} />\n      { forkliftLane === 1 && <Sprite image={`${process.env.PUBLIC_URL}/images/map/rack-big.png`} x={385} y={-172} />}\n      { forkliftLane > 0 && forkliftLane < 3 && <Sprite image={`${process.env.PUBLIC_URL}/images/map/rack-big.png`} x={191} y={-84} />}\n\n\n      <Sprite image={`${process.env.PUBLIC_URL}/images/map/rack-big.png`} y={0} x={0} name=\"racks closest\"/>\n    </Container>\n  );\n}\n\nexport default BigRacks;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"style\", {\n  type: \"text/css\"\n}, \"\\n\\t.st0{fill:none;stroke:#3FA548;stroke-width:32;}\\n\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"defs\", null);\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Page-1\"\n}, /*#__PURE__*/React.createElement(\"polyline\", {\n  id: \"checkmark\",\n  className: \"st0\",\n  points: \"11.33,88.97 88.95,166.87 244.67,11.32  \"\n}));\n\nvar SvgCheck = function SvgCheck(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"m-check-mark\",\n    x: \"0px\",\n    y: \"0px\",\n    width: \"255.97px\",\n    height: \"189.51px\",\n    viewBox: \"0 0 255.97 189.51\",\n    style: {\n      enableBackground: \"new 0 0 255.97 189.51\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgCheck, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/check.81786b3c.svg\";\nexport { ForwardRef as ReactComponent };","import React from \"react\";\nimport { ConflictContent } from \"../../common/constants\";\nimport { ReactComponent as CheckSvg } from './../../images/ui/check.svg';\nimport \"./legenda.css\";\n\ninterface Props {\n    avatar: string;\n    content: ConflictContent[];\n    translations: { [key: string]: string}\n    answers: number[];\n    setSituationSelected: React.Dispatch<React.SetStateAction<number | null>>;\n}\n\nconst Legenda = (props: Props) => {\n    const { content, translations } = props;\n\n    const renderContent = (item: ConflictContent, index: number) => {\n        const completed = props.answers[index] === undefined;\n        const handleClick = () => {\n            props.setSituationSelected(index);\n        }\n        if (completed) {\n            return (\n                <li className=\"\" onClick={handleClick} key={item.header}>\n                    {translations[item.header]}\n                </li>\n            )\n        }\n\n        return (\n            <li className=\"completed\" key={item.header}>\n                <CheckSvg className=\"check\" />\n                {translations[item.header]}\n            </li>\n        )\n    }\n    return (\n        <div className=\"legenda\">\n            <div className=\"avatar\"\n                style={{backgroundImage: `url(${process.env.PUBLIC_URL}/images/avatars/${props.avatar}-front.png)`}}\n            >\n\n            </div>\n            <ul>\n                {content.map((contentItem, index) => renderContent(contentItem, index))}\n            </ul>\n        </div>\n    )\n}\n\nexport default Legenda;","import React, { useState, useRef, useEffect, useMemo } from \"react\";\nimport { Viewport as PixiViewport } from \"pixi-viewport\";\nimport { ConflictContent } from \"../common/constants\";\nimport sound from 'pixi-sound';\nimport Marker from \"./pixi/Marker\";\nimport { Stage, Sprite } from \"@inlet/react-pixi\";\nimport ContentModal from \"./contentModal\";\nimport Viewport from \"./pixi/Viewport\";\nimport * as PIXI from 'pixi.js';\nimport { PixiPlugin } from 'gsap/all';\nimport { gsap } from 'gsap'\nimport Conveyor from \"./pixi/Conveyor\";\nimport BigRacks from \"./pixi/BigRacks\";\nimport Legenda from \"./legenda\";\n\nPixiPlugin.registerPIXI(PIXI);\ngsap.registerPlugin(PixiPlugin);\n\n// if (process.env.NODE_ENV === \"development\") {\n//   // @ts-ignore\n//   window.__PIXI_INSPECTOR_GLOBAL_HOOK__ && window.__PIXI_INSPECTOR_GLOBAL_HOOK__.register({ PIXI: PIXI });\n// }\n\ninterface Props {\n  content: ConflictContent[];\n  translations: { [key: string]: string}\n  answers: number[];\n  avatar: string;\n  setAnswers: (value: number[]) => void;\n  setSituationOpen: (value: boolean) => void;\n}\n\nconst Main = (props: Props) => {\n  const { content, translations, avatar, answers, setSituationOpen } = props;\n  const viewportRef = useRef<PixiViewport>(null);\n  const [selectedSituation, setSelectedSituation] = useState<number | null>(null);\n\n  const worldWidth = 3497;\n  const worldHeight = 1419;\n\n  const [canvasWidth, setCanvasWidth] = useState(1200);\n  const [canvasHeight, setCanvasHeight] = useState(600);\n\n  useEffect(() => {\n    // This will set the dimensions of the canvas to that of the window\n    const resize = () => {\n      const width = Math.min(window.innerWidth, window.outerWidth);\n      const height = Math.min(window.innerHeight, window.outerHeight);\n      setCanvasWidth(width);\n      setCanvasHeight(height); \n    }\n    resize();\n\n    window.addEventListener(\"resize\", resize);\n    return () => {\n      window.removeEventListener(\"resize\", resize);\n    };\n  }, []);\n\n  useEffect(() => {\n    // Center the map\n    if (viewportRef.current) {\n      const viewport = viewportRef.current;\n      viewport.moveCenter(worldWidth / 2, worldHeight / 2);  \n      viewport.scale = new PIXI.Point(0.5, 0.5);\n    }\n  }, [canvasWidth, canvasHeight]);\n\n  useEffect(() => {\n    // Blur the map when situation is selected\n    if (selectedSituation) {\n      gsap.to(viewportRef.current, {duration: .5, pixi: {blur:20}});\n    } else {\n      gsap.to(viewportRef.current, {duration: .5, pixi: {blur:0}});\n    }\n\n    setSituationOpen(selectedSituation !== null)\n  }, [selectedSituation, setSituationOpen]);\n\n  useEffect(() => {\n    sound.add('plops', {\n      url: `${process.env.PUBLIC_URL}/sound/plops.wav`,\n      autoPlay: true,\n    });    \n  }, []);\n\n  const handleMarkerClick = (content: ConflictContent, index: number) => {\n    setSelectedSituation(index);\n  }\n\n  const handleClose = () => {\n    setSelectedSituation(null);\n  }\n\n  const handleCorrectAnswer = (answer: number) => {\n    // gets called from within modal once the correct answer is selected\n    const copy = [...answers];\n    copy[selectedSituation!] = answer;\n\n    props.setAnswers(copy);\n  }\n\n  const selectedContent = useMemo(() => {\n    if (selectedSituation === null) {\n      return null;\n    }\n    return content?.[selectedSituation];\n  }, [content, selectedSituation]);\n  \n  const renderMarker = (contentItem: ConflictContent, index: number) => {\n    const delay = index * 0.5;\n    const position = new PIXI.Point(contentItem.position[0], contentItem.position[1]);\n    const bounce = answers[index] === undefined;\n\n    return (\n      <Marker \n        position={position} \n        pointerdown={() => handleMarkerClick(contentItem, index)}\n        delay={delay}\n        bounce={bounce}\n        key={contentItem.position.join('-')}\n      />\n    ); \n  }\n\n  return (\n    <>\n      <Stage width={canvasWidth} height={canvasHeight} options={{transparent: true}} >\n        <Viewport screenWidth={canvasWidth} screenHeight={canvasHeight} worldWidth={worldWidth} worldHeight={worldHeight} ref={viewportRef} >\n          <Sprite image={`${process.env.PUBLIC_URL}/images/map/warehouse-back.png`} >\n            <BigRacks x={1153} y={207} />\n            <Sprite image={`${process.env.PUBLIC_URL}/images/map/safe.png`} x={2086} y={296} />\n            <Sprite image={`${process.env.PUBLIC_URL}/images/map/middle.png`} x={806} y={334} />\n\n            <Conveyor name={\"Conveyor\"} x={269} y={498} />\n            <Sprite image={`${process.env.PUBLIC_URL}/images/map/packing.png`} x={995} y={848} name=\"packing-table\"/>\n\n            <Sprite image={`${process.env.PUBLIC_URL}/images/map/warehouse-front-wall.png`} y={705} name=\"front-wall\"/>\n            {content.map((contentItem, index) => renderMarker(contentItem, index))}\n          </Sprite>\n        </Viewport>\n      </Stage>\n      <Legenda \n        avatar={props.avatar} \n        translations={translations}\n        content={content} \n        answers={answers} \n        setSituationSelected={setSelectedSituation}\n      />\n      { selectedContent && (\n        <ContentModal \n          content={selectedContent}\n          translations={translations}\n          onClose={handleClose}\n          avatar={avatar}\n          setCorrectAnswer={handleCorrectAnswer}\n          selectedAnswer={(answers[selectedSituation!])}\n        /> \n      )}\n    </>\n  )\n};\n\nexport default Main;","import React from 'react';\nimport ReactModal from 'react-modal';\nimport { Stage, Sprite, Container } from '@inlet/react-pixi';\nimport {OutlineFilter} from '@pixi/filter-outline';\nimport './introModal.css';\n\ninterface Props {\n  selectedAvatar?: string;\n  translations: { [key: string]: string}\n  onClose: () => void;\n  onChangeAvatar: (name: string) => void;\n}\n\nconst stageHeight = 720;\nconst stageWidth = 1280;\n\nconst IntroModal = (props: Props) => {\n  const {selectedAvatar, translations} = props;\n\n  const renderAvatar = (name: string, index: number, flipped: boolean = false) => {\n    const filters = selectedAvatar === name ? [new OutlineFilter(4, 0xffcc00)] : [];\n    let scale = selectedAvatar === name ? .7 : .6;\n    const zIndex = selectedAvatar === name ? 2 : 0;\n\n    const image = `${process.env.PUBLIC_URL}/images/avatars/${getAvatarImage(name)}.png`;\n\n    return (\n      <Sprite \n        image={image} \n        filters={filters} \n        anchor={[0.5, 0.5]}\n        scale={[(flipped ? -scale : scale), scale]}\n        y={stageHeight / 2}\n        x={stageWidth / 5 + (index * (stageWidth / 5))}\n        zIndex={zIndex}\n        interactive\n        pointerdown={() => props.onChangeAvatar(name)}\n      />\n    );\n  }\n\n  return (\n    <ReactModal\n      isOpen={true}\n      ariaHideApp={false}\n      portalClassName=\"modal-portal\"\n      overlayClassName=\"modal-overlay modal-intro-overlay\"\n      className=\"modal modal-intro\"\n      onRequestClose={props.onClose}\n    >\n      <div className=\"modal-content\">\n        <h1 className=\"header\">{translations[\"intro-header\"]}</h1>\n\n        <div className=\"avatar-selection\">\n          <Stage width={stageWidth} height={stageHeight} options={{ backgroundColor: 0xffffff}}>\n            <Sprite image={`${process.env.PUBLIC_URL}/images/avatars/background.png`} \n              scale={1} \n              anchor={.5}\n              y={stageHeight / 2}\n              x={stageWidth / 2}\n            />\n            <Container sortableChildren>\n              { renderAvatar('avatar1', 0) }\n              { renderAvatar('avatar2', 1) }\n              { renderAvatar('avatar3', 2) }\n              { renderAvatar('avatar4', 3, true) }\n            </Container>\n          </Stage>\n          <div className=\"footer\">\n            <p className=\"subtext\">\n              {translations[\"intro-subtext\"]}\n            <br/>\n             {translations[\"intro-choose-avatar\"]}\n            </p>\n            <button \n              onClick={props.onClose} \n              disabled={props.selectedAvatar === undefined}\n            >\n              {translations[\"intro-start\"]}\n            </button>\n          </div>\n        </div>\n      </div>\n    </ReactModal>  \n    )\n}\n\nconst getAvatarImage = (avatar: string) => {\n  switch (avatar) {\n    case \"avatar1\":\n      return \"avatar1-angle\";\n    case \"avatar2\":\n      return \"avatar2-front\";\n    case \"avatar3\":\n      return \"avatar3-front\";\n    case \"avatar4\":\n      return \"avatar4-angle\";\n  }\n}\n\nexport default IntroModal;\n","import React from 'react';\nimport ReactModal from 'react-modal';\nimport { Stage, Sprite } from '@inlet/react-pixi';\nimport './completeModal.css';\n\ninterface Props {\n  avatar: string;\n  translations: { [key: string]: string}\n  restart: () => void;\n}\n\nconst stageHeight = 720;\nconst stageWidth = 1280;\n\nconst CompleteModal = (props: Props) => {\n  const { translations } = props;\n  return (\n    <ReactModal\n      isOpen={true}\n      ariaHideApp={false}\n      portalClassName=\"modal-portal\"\n      overlayClassName=\"modal-overlay modal-complete-overlay\"\n      className=\"modal modal-complete\"\n    >\n      <div className=\"modal-content\">\n        <h1 className=\"header\">{translations[\"complete-header\"]}</h1>\n\n        <div className=\"avatar-selection\">\n          <Stage width={stageWidth} height={stageHeight} options={{ backgroundColor: 0xffffff}}>\n            <Sprite image={`${process.env.PUBLIC_URL}/images/avatars/background.png`} \n              scale={1} \n              anchor={.5}\n              y={stageHeight / 2}\n              x={stageWidth / 2}\n            />\n            <Sprite \n              image={`${process.env.PUBLIC_URL}/images/avatars/${props.avatar}-happy.png`} \n              anchor={[0.5, 0.5]}\n              scale={0.8}\n              y={stageHeight / 2}\n              x={stageWidth / 2}\n              />\n          </Stage>\n          <div className=\"footer\">\n            <p className=\"subtext\">\n              {translations[\"complete-congrats\"]}\n            <br/>\n            <button onClick={props.restart}>\n              {translations[\"replay-button\"]}\n            </button>\n            </p>\n          </div>\n        </div>\n      </div>\n    </ReactModal>  \n    )\n}\n\nexport default CompleteModal;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"style\", null, \".a{fill:#fff;}.a,.b{stroke:#283583;stroke-linecap:round;stroke-linejoin:round;stroke-width:0.75px;}.b{fill:none;}\"));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"title\", null, \"Back\");\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"circle\", {\n  className: \"a\",\n  cx: 15.02,\n  cy: 15.02,\n  r: 14.65\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"b\",\n  d: \"M11.64,16\",\n  transform: \"translate(-0.97 -0.93)\"\n});\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"b\",\n  d: \"M11.63,16\",\n  transform: \"translate(-0.97 -0.93)\"\n});\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"b\",\n  d: \"M20.38,22.88\",\n  transform: \"translate(-0.97 -0.93)\"\n});\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"line\", {\n  className: \"b\",\n  x1: 19.39,\n  y1: 8.16,\n  x2: 10.65,\n  y2: 15.02\n});\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"line\", {\n  className: \"b\",\n  x1: 19.39,\n  y1: 21.98,\n  x2: 10.65,\n  y2: 15.11\n});\n\nvar SvgClose = function SvgClose(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 30.04,\n    height: 30.04,\n    viewBox: \"0 0 30.04 30.04\",\n    ref: svgRef\n  }, props), _ref2, title === undefined ? _ref3 : title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgClose, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/close.7ec0d58f.svg\";\nexport { ForwardRef as ReactComponent };","\nimport React, {  useEffect } from 'react';\nimport './style/styles.css';\nimport { ReactComponent as CloseIcon } from './style/close.svg';\n\ninterface Props {\n    gameDataReceived: (gameData: any) => void;\n}\n\nconst PlayerBridge = (props: Props) => {   \n    const {gameDataReceived} = props;\n\n    const send = (payload: any) => {\n        // @ts-ignore\n        if (window.hasOwnProperty(\"webkit\") && window.webkit.hasOwnProperty(\"messageHandlers\")){\n            var stringifiedMessageObj = JSON.stringify(payload);\n            // Send to In App Browser context\n            // @ts-ignore\n            webkit.messageHandlers.cordova_iab.postMessage(stringifiedMessageObj);\n        }\n        else {\n            // @ts-ignore\n            window.parent.postMessage(payload, '*');\n        }\n    }\n\n    const exit = () => {       \n        send({\n            type: 'exit'\n        });\n    }\n\n    \n    useEffect(() => {\n        if (!process.env.REACT_APP_PLAYER_MODE) {\n            return;\n        }\n        \n        const receiveMessage = (msg: any) => {\n            if (!msg.data.hasOwnProperty('userId')){\n                return;\n            }\n            // @ts-ignore\n            window.GAMEDATA = msg.data;\n            gameDataReceived(msg.data);\n        }\n\n        // @ts-ignore\n        window.setGameData = (gameData) => {\n            send({\n                type: 'setGameData',\n                data: gameData\n            });\n        }\n       \n        // @ts-ignore\n        window.GAMEDATA = null; \n        \n        // @ts-ignore\n        window.getGameData = () => {\n            // @ts-ignore\n            return window.GAMEDATA;\n        }   \n        window.addEventListener(\"message\", receiveMessage, false);\n    }, [gameDataReceived]);\n\n    if (!process.env.REACT_APP_PLAYER_MODE) {\n        return null;\n    }\n\n\n    return (\n        <div className=\"close\">\n            <CloseIcon onClick={exit} />\n        </div>\n    )\n}\n\nexport default PlayerBridge;","import React, { useState, useMemo, useEffect, useCallback } from 'react';\nimport Main from './components/Main';\nimport IntroModal from './components/introModal/introModal';\nimport CompleteModal from './components/completeModal/completeModal';\nimport PlayerBridge from './components/playerBridge';\nimport { GameData } from './components/playerBridge/GameData';\nimport { ConflictContent } from './common/constants';\nimport './App.css';\n\nfunction App() {\n\n  const [intro, setIntro] = useState(true);\n  const [answers, setAnswers] = useState<number[]>([]);\n  const [avatar, setAvatar] = useState<string>(\"avatar1\");\n  const [situationIsOpen, setSituationOpen] = useState(false);\n  const [translations, setTranslations] = useState<{[key: string]: string}>({});\n  const [data, setData] = useState<GameData<ConflictContent[]>>();\n  const content = useMemo(() => data?.content, [data]);\n\n  const handleRestart = () => {\n    setAnswers([]);\n  }\n\n  const handleGameDataReceived = useCallback((data: GameData<ConflictContent[]>) => {\n\n    setData(data);\n    \n    if (data.translations){\n      const t = data.translations.reduce<{[key: string]: string}>((acc, translation) => {\n        acc[translation.key] = translation.value;\n        return acc;\n      }, {});\n      setTranslations(t);\n    }\n  }, []);\n\n  useEffect(() => {\n    // @ts-ignore\n\n    // See if we are fed gamedata by 21ccplayer app, if not, go fetch it ourselves\n    if (!process.env.REACT_APP_PLAYER_MODE) {\n      // @ts-ignore\n      if(!content) {\n        console.log(\"no bridge found, fetching fallback\")\n        // @ts-ignore\n        \n\n        fetch(`${process.env.PUBLIC_URL}/config/conflict-resolution-NL.json`)\n        // fetch(`${process.env.PUBLIC_URL}/config/conflict-resolution-EN.json`)\n        .then((response) => {\n          response.json().then((data) => {\n\n            handleGameDataReceived(data);\n          })\n        })\n      }\n    };\n  }, [content, handleGameDataReceived]);\n  \n  const completed = useMemo(() => {\n    return answers.filter(Boolean).length === content?.length;\n  }, [answers, content]);\n\n  const showCompleted = useMemo(() => completed && !situationIsOpen, [completed, situationIsOpen]);\n\n\n\n  return (\n    <>\n      <PlayerBridge gameDataReceived={handleGameDataReceived}/>\n      { intro && (\n        <IntroModal\n          translations={translations}\n          selectedAvatar={avatar} \n          onClose={() => {setIntro(false)}} \n          onChangeAvatar={setAvatar}/>\n        )}\n      { !showCompleted && !intro && avatar && content && (\n        <Main \n          content={content} \n          translations={translations}\n          avatar={avatar} \n          answers={answers} \n          setAnswers={setAnswers} \n          setSituationOpen={setSituationOpen}\n        /> \n      )}\n      { showCompleted && avatar && (\n        <CompleteModal\n          avatar={avatar} \n          restart={handleRestart}\n          translations={translations}\n        />)}\n    </>  \n  )\n};\n\nexport default App;\n\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React, { StrictMode } from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}